[Kezdőlap](../README.md)

# URI-sablonok

## RFC 6570 ajánlás (kivonat)

A jelen kivonat csak az RFC-ajánlásra hivatkozó PSR-szabvány(ok) jobb megértéséhez
feltétlenül szükséges részek magyarítását tartalmazza. A teljes angol szöveg megtalálható
az RFC-ket gondozó szabványosító szervezet, az IETF oldalán: [RFC 6570](https://datatracker.ietf.org/doc/html/rfc6570).

A csupa nagybetűvel szedett, a követelmények szintjének jelzésére szolgáló kiemelt
kulcsszavak ebben a leírásban az [RFC 2119](2119.md) szerint értelmezendők.

Ez a specifikáció a Bővített Backus–Naur Forma (ABNF) jelölőrendszerről szóló
[STD 68 internetes szabványt](5234.md) alkalmazza, lokalizált elnevezésekkel.

## 1. Bevezetés

### 1.1 Áttekintés

A [Uniform Resource Identifier (URI)](3986.md) gyakran használatos egy adott
erőforrás azonosítására hasonló erőforrások közös helyén ("URI tér"). Az URI-sablon
egy tömör karaktersorozat, amely az URI értéktartományának változókkal bővített
leírására szolgál. Az URI-sablon a változók (paraméterek) használatával lehetővé
teszi struktúrálisan hasonló URI-k megadását.

Az URI-sablonok egy olyan mechanizmust biztosítanak az erőforrás azonosítók helyének
elvonatkoztatásához, amely lehetővé teszi a változó részek egyszerű azonosítását
és leírását. Az URI-sablonok számos helyen használhatók, mint például az elérhető
szolgáltatások felfedezése, erőforráshozzárendelések konfigurálása, származtatott
hivatkozások meghatározása, interfészek meghatározása, valamint az erőforrásokkal
való programozott interakció egyéb más formái. Néhány példa a sablonok használatára:

```
  http://example.com/~{username}/
  http://example.com/dictionary/{term:1}/{term}
  http://example.com/search{?q,lang}

```

#### Alapfogalmak:

<dl>
  <dt>Kifejezés (expression):</dt>
  <dd>
    Kapcsos zárójelek (`{` és `}`) közé zárt szöveg, a <a href="#2-szintaxis">2. fejezetben</a>
    foglaltak szerint.
  </dd>
  <dt>Bővítmény (expansion):</dt>
  <dd>
    A sablonkifejezésből (expression) a kifejezés típusának, a változónevek listájának
    és az értékmódosítóknak megfelelő feldolgozás után kapott string típusú eredmény,
    a <a href="#3-bővítés">3. fejezetben</a> foglaltak szerint.
  </dd>
  <dt>Sablonfeldolgozó (template processor):</dt>
  <dd>
    Egy program vagy függvénykönyvtár (csomag), amely adott URI-sablon és a változók
    kulcs-érték párokba rendezett halmaza alapján, a sablon értelmezésével átalakítja
    a sablon karakterláncot egy konkrét URI-hivatkozássá, minden kefejezést a
    megfelelő konkrét értékkel helyettesítve.
  </dd>
</dl>

Egy URI-sablon biztosítja egy URI-tér szerkezeti leírását, illetve amikor változó
értékeket adnak meg, akkor gép által értelmezhető utasításokat is arra vonatkozóan,
hogyan lehet a megadott értékeknek megfelelő, konkrét URI-t létrehozni. Egy URI-sablon
minden kifejezésnek a kifejezéstípusban meghatározott módon, a kifejezéshez tartozó
változóértékkel való behelyettesítésével átalakul egy konkrét URI hivatkozássá.
A kifejezéstípus értéktartománya az egyszerű string-kifejezéstől a kulcs=érték párok
többelemű listájáig terjedhet. A bővítmények az URI szabványos szintaxisán alapulnak,
így lehetővé teszik a megvalósítások számára, hogy bármilyen URI-t feldolgozzanak,
a nélkül, hogy pontosan ismernék a lehetséges kimeneti URI-k séma-specifikus
követelményeit.

### 1.2 Szintek és kifejezés-típusok

A kifejezés típusa meghatározza a behelyettesítési folyamatot. Az alapértelmezett
típus az egyszerű szöveges behelyettesítés, amelyben egyszerű, nevesített változók
helyettesítődnek be szöveges értékükkel, miután a nem fenntartott URI karakterek
között nem szereplő karakterek URL-kódoláson estek át. Mivel több sablonfeldolgozó
még a jelen specifikáció megalkotása előtt készült, ezért csak az alapértelmezett
típust tudják kezelni, amire e helyütt **1. szintű sablon**ként hivatkozunk.

A **2. szintű sablonok** hozzáadják a plusz ("+") operátort az olyan értékek
behelyettesítéséhez, amelyekben megengedett fenntartott URI karakterek használata
is, valamint a kettőskereszt operátort ("#"), a töredék (fragment) azonosító
behelyettesítésére.

A **3. szintű sablonok** engedélyezik több vesszővel elválasztott változó elhelyezését
a kifejezésben, illetve több komplex operátort biztosítanak a ponttal kezdődő
címkékhez, a visszaperjellel kezdődő útvonal-komponensekhez (path), a pontosvesszőt követő
útvonal-paraméterekhez, valamint az és-jellel ("&") elválasztott név=érték párokból
felépülő, űrlap-formátumú lekérdezésekhez (query string).

A **4. szintű sablonok** választható utótagként értékmódosítókat adnak minden
változónévhez. Az előtag módosító (":") például azt jelenti, hogy a behelyettesítés
során az érték kezdetétől számítva csak korlátozott számú karakter használható.

## 2. Szintaxis

Az URI-sablon nyomtatható unicode karakterek sorozata, amely nulla vagy több
beágyazott változó-kifejezést tartalmaz. Minden kifejezést kapcsos zárójelek
(`{` és `}`) határolnak.

```URI-sablon  = *( literálok / kifejezés )```

### 2.1 Literálok

Az URI-sablon stringben minden karakter, amely a kifejezéseken kívül található, szó
szerint bemásoltatik a kész URI hivatkozásba, amennyiben a karakter engedélyezett
az URI-ben. Ha nem engedélyezett, akkor helyette a megfelelő [url-kódolt](3986.md#21-url-kódolás)
hármasok (```"%" HEXADECIMÁLIS HEXADECIMÁLIS```) sorozata kerül a hivatkozásba.

### 2.2 Kifejezések

A sablonkifejezések az URI sablon paraméterezett részei. Minden kifejezés tartalmaz
egy opcionális operátort, ami meghatározza a kifejezés típusát és a hozzá tartozó
bővítési folyamatot. A kifejezést a változónevek vesszővel elválasztott felsorolása
és opcionális értékmódosítók zárják. Ha nincs operátor megadva, akkor a kifejezés
alapértelmezés szerint nem más, mint egyszerű változóbehelyettesítés.

```
  kifejezés      =  "{" [ operátor ] változók-listája "}"
  operátor       =  op-2szint / op-3szint / op-fenntartott
  op-2szint      =  "+" / "#"
  op-3szint      =  "." / "/" / ";" / "?" / "&"
  op-fenntartott =  "=" / "," / "!" / "@" / "|"
```

### 2.3 Változók

Az operátor után (ha van), minden kifejezés tartalmaz egy egy vagy több vesszővel
elválasztott változó specifikálóból álló listát. A változónevek kis-, és nagybetű
érzékenyek.

```
  változó-lista =  specifikáló *( "," specifikáló )
  specifikáló   =  változónév [ 4szintű-módosító ]
  változónév    =  karakter *( ["."] karakter )
  karakter      =  ANGOLABC / DECIMÁLIS / "_" / uri-kódolt
```

Egy változónévben LEHET egy vagy több  [url-kódolt](3986.md#21-url-kódolás) hármas
(```"%" HEXADECIMÁLIS HEXADECIMÁLIS```). Ezek a változónév alapvető részének tekintendők,
ezért a feldolgozás közben nem kerülnek dekódolásra.

**4. szintű sablonokban** egy változónak összetett értéke is lehet, értékek listája
vagy név=érték párokból felépülő asszociatív tömb formájában.

Az üres karaktert ('') tartalmazó változóérték nem tekinthető definiáltalannak, mivel
az értéke pontosan egy üres karakter. Ha a változó listaelemként van meghatározva,
ez esetben akkor tekinthető definiálatlannak, ha a lista nulla elemet tartalmaz.
Ez igaz arra az esetre is, ha a változó név=érték párokból felépülő asszociatív
tömbként van meghatározva. Asszociatív tömb esetén akkor is definiálatlannak tekintendő
a változó, ha tömb kulcsai definiálatlan értékhez társulnak.

### 2.4 Értékmódosítók

#### 2.4.1 Előtagok

#### 2.4.2 Összetett értékek

## 3. Behelyettesítés



[Kezdőlap](../README.md)
