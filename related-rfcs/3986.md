[Kezdőlap](../README.md)

# RFC 3986. ajánlás (kivonat)

A jelen kivonat csak az RFC-ajánlásra hivatkozó PSR-szabvány jobb megértéséhez feltétlenül
szükséges részek magyarítását tartalmazza. A teljes angol szöveg megtalálható az
RFC-ket gondozó szabványosító szervezet, az IETF oldalán: [RFC 3986](https://tools.ietf.org/html/rfc3986).

## Egységes Erőforrás-azonosító (URI)

A különböző szabályok [ABNF](2234.md) metaszintaxis segítségével vannak szemléltetve.

#### 1.1.3. URI, URL, és URN

Az URI (Uniform Resource Identifier, egységes erőforrás-azonosító) egy rövid
karaktersorozat, amelyet egy webes erőforrás azonosítására használunk. Az URI az
erőforrást hely, név vagy mindkettő alapján képes azonosítani, ez alapján két
részhalmazra osztható:
* URL (Uniform Resource Locator - Egységes Erőforrás Helymeghatározó),
* URN (Uniform Resource Name - Egységes Erőforrás Név).

Az URL az erőforrás hely alapján történő azonosításán túlmenően magában foglalja
az erőforrás eléréséhez szükséges protokollt is.

Az URN olyan hivatkozási rendszer, amely az erőforrás egyedi azonosítását névterek
segítségével oldja meg az [RFC2141](https://www.ietf.org/rfc/rfc2141.txt)
ajánlása alapján, anélkül, hogy a helyére vagy az elérhetőségére utalna. Ez akkor
is tartós és globálisan egyedi azonosítókat eredményez, ha az erőforrás már megszűnt,
vagy nem elérhető.

Az URN használatára szemléletes példa a könyvek [ISBN-szám](https://hu.wikipedia.org/wiki/ISBN)
szerinti azonosítása (pl. `urn:isbn:978-963-08-4733-9`), illetve az OSZK elektronikus
dokumentumok hosszútávú azonosítására szolgáló [URN:NBN (National Bibliography Number)
rendszere](http://nbn.urn.hu/).

#### 1.2.3. Hierarchikus azonosítók

Az URI szintaxisa hierarchikusan szervezett, a komponensek jelentőség szerint
csökkenő sorrendben követik egymást balról jobbra. Az általános szintaxis perjelet
("/"), kérdőjelet ("?") és kettős keresztet ("#") alkalmaz határoló karakterként
az összetevők elválasztására. Ez amellett, hogy az ismert szintaxis következetes
alkalmazásával segíti az azonosítók olvashatóságát, a hierarchia egységesített
ábrázolásával az elnevezési sémákon keresztül lehetővé teszi rendszer-független,
a hierarchiához viszonyított hivatkozások készítését.

### 2. Karakterkészlet

Az URI szintaxisa biztosítja az adatok helyes kódolását az erőforrások azonosítása
érdekében. Ha az URI tartalmaz protokoll összetevőt is, akkor a karakterkódolást
a megadott protokoll határozza meg.

Az URI-t egy ékezet nélküli latin betűkből, arab számokból és néhány írásjelből
álló korlátozott karakterkészlet alkotja. Ennek egy fenntartott részhalmaza tartalmazza
a szintaxisban az URI komponenseit elválasztó határoló karaktereket, míg az egyes
összetevők azonosító adatait a fennmaradó karakterek - beleértve a nem fenntartott
karakterek mellett azokat a fenntartott karaktereket is, amelyek nem töltenek be
komponens-határoló szerepet - határozzák meg.

#### 2.1. URL-kódolás

Ha a fenntartott karakterek egyike kijelölt céljától eltérő szerepben lenne jelen
egy adott URL-ben, helyére egy százalékjel (%) és a karakter ASCII kódja kerül
kétjegyű hexadecimális formátumban. Például a szóköz karakter URL-kódolva így néz
majd ki: "%20".

```
  url-kódolt = "%" HEXADECIMÁLIS HEXADECIMÁLIS
```
Az ASCII karaktertáblában nem szereplő betűk, például az ékezetes magyar magánhangzók
vagy egyes speciális karakterek [URL-kódolása](https://www.w3schools.com/tags/ref_urlencode.asp)
ettől eltérhet (két vagy három kétjegyű hexadecimális szám jelöli őket). A nagy
"Á" betű például így fog mutatni URL-kódolva: "%C3%81", míg a kicsi így: "%C3%A1".

A hexadecimális számokban szereplő, számokat jelölő betűk írásmódja tetszőleges,
nem kis-, és nagybetű érzékeny, így az "A" éppúgy tízet fog jelenteni, mint az "a".
A következetesség érdekében azonban erősen ajánlott a nagybetűs írásmód használata.

#### 2.2. Fenntartott karakterek

Az URI egyes komponenseit az erre a célra fenntartott karakterek választják el
egymástól. Ha ezek kijelölt céljuktól eltérő szerepben is előfordulnak az URI-ben
akkor a 2.1 fejezetben ismertetett módon kódolni kell őket.

```
  fenntartott    = fő-határolók / más-határolók
  fő-határolók   = ":" / "/" / "?" / "#" / "[" / "]" / "@"
  más-határolók  = "!" / "$" / "&" / "'" / "(" / ")" / "*" / "+" / "," / ";" / "="
```

#### 2.3.  Nem fenntartott karakterek

Az URI-ben engedélyezett, de külön meghatározott céllal nem rendelkező karaktereket
nem fenntartottként tartjuk nyilván. E nem fenntartott karakterek közé tartoznak
az ékezet nélküli latin kis-, és nagybetűk, arab számok és a következő írásjelek:
"–" (kötőjel), "_" (aláhúzás), "." (pont), "~" (hullámvonal).

```
  nem-fenntartott = BETŰ / DECIMÁLIS / "-" / "_" / "." / "~"
```

#### 2.4. Mikor kódolunk vagy dekódolunk

Normál körülmények között az URI részei csak a létrehozási folyamat alatt lesznek
URL-kódolva (pl. mielőtt a böngészőnk elküldi a begépelt URL-t). Ilyenkor az alkalmazott
implementáció határozza meg, hogy mely fenntartott karakteret kell komponens-határolóként
alkalmazni és melyeket lehet biztonsággal adatként használni. A kész URI mindig URL-kódolt.

Az implementációknak nem szabad egynél többször URL-kódolni vagy dekódolni ugyanazt
a karakterláncot, mert a már dekódolt szöveg ismételt dekódolása félreértelmezéshez
vezet.

### 3. Szintaktikai összetevők

Az általános URI szintaxis az összetevők hierarchikus sorozatából áll. Az elemek
balról jobbra, csökkenő fontossági sorrendben a következők: séma (scheme),
hitelesítés (authority), útvonal (path), lekérdezés (query) és részerőforrás
(fragment).

```
                URI = séma ":" hierarchikus-rész [ "?" lekérdezés ] [ "#" részerőforrás ]

  hierarchikus-rész = "//" hitelesítés absz-vagy-üres-útvonal
                  / abszolút-útvonal
                  / relatív-útvonal
                  / üres-útvonal
```

A séma és az útvonal komponens minden esetben szükséges, de az elérési út lehet
üres is (0 karakter). Ha a hitelesítési komponens jelen van az URI-ben, akkor az
elérési útnak vagy üresnek kell lenni, vagy pedig perjellel ("/") kell kezdődnie.
Amikor az URI nem tartalmaz hitelesítési komponenst, akkor az elérési út nem
kezdődhet dupla perjellel ("//").

A következő két példa az URI hierarchikus felépítését szemlélteti:

```
    http://example.com:8042/over/there?name=ferret#nose
     \_/   \______________/\_________/ \_________/ \__/
      |           |            |            |        |
    séma     hitelesítés    útvonal    lekérdezés részerőforrás
      |   _____________________|__
     / \ /                        \
     urn:example:animal:ferret:nose
```

#### 3.1. Séma (scheme)

Minden egyes URI a séma nevével kezdődik, ami a rendszeren belül az azonosítók
hozzárendelésére vonatkozó specifikációra utal. Mint ilyen, az URI szintaxis egy
kiterjeszthető elnevezési rendszer, amelyben minden séma-specifikáció tovább
szűkítheti a szintaxist és a sémák által használt azonosítók szemantikáját.

A sémák neve a karakterek olyan sorozatából áll, melynek első eleme mindig egy
betű, amelyet tetszőleges kombinációban követhetnek további betűk, számok, illetve
pluszjel ("+"), pont (".") és kötőjel ("-"). Habár a sémák neve nem kis-, és nagybetű
érzékeny, a szabályos alak mégis a kisbetűs írásmód, ezért a sémákat leíró
dokumentumokban is így illik írni.

Egy implementációnak ettől függetlenül a kisbetűkkel egyenértékűnek kell elfogadnia
a nagybetűket is a sémák nevében (pl. "HTTP" és "http" alak) a robusztusság kedvéért,
viszont a következetesség érdekében létrehoznia csak kisbetűs séma nevet lehet.

```
  séma = BETŰ *( BETŰ / DECIMÁLIS / "+" / "-" / "." )
```

#### 3.2. Hitelesítés (authority)

Számos URI-séma tartalmaz egy hierarchikusan felépülő hitelesítési elemet úgy,
hogy az URI fennmaradó része által meghatározott névtér irányítását átruházza
erre (ami viszont tovább delegálhatja a feladatot). Az általános
szintaxis biztosít egy közös eszközt a hitelesítési komponens megkülönböztetésére,
a gazdagép neve vagy IP-címe, és opcionálisan a port és a felhasználói
információ alapján.

A hitelesítési komponens dupla perjellel ("//") kezdődik és a következő perjelig
("/"), kérdőjelig ("?") vagy kettős keresztig ("#"), ezek hiányában az URI
végéig tart.

```
  hitelesítés = [ userinfo "@" ] gazdagép [ ":" port ]
```

#### 3.2.1. Felhasználói információ (userinfo)

A felhasználói információ egy felhasználói névből és opcionálisan egy
rendszer-specifikus információból állhat, amely azt írja le, milyen hitelesítés
után lehet hozzáférni az erőforráshoz. A felhasználói információt - ha jelen van az
URI-ben - egy kukacjel ("@") választja el a gazdagép nevétől.

```
  userinfo = *( nem-fenntartott / url-kodolt / más-határolók / ":" )
```

A **"felhasználó:jelszó"** formátum használata az URI-ben elavult, biztonsági
kockázatot jelent (nyílt csatornán, kódolatlan formában küld kényes adatot),
ezért kerülendő!

#### 3.2.2. Gazdagép (host)

A hitelesítés mező gazdagép részkomponensét jelölheti egy szögletes zárójelek közé
tett [IP-literál](https://hu.wikipedia.org/wiki/IPv6-c%C3%ADm) (ez az egyetlen hely,
ahol a szögletes zárójelek megengedettek az URI szintaxisában), vagy a hagyományos,
pontokkal elválasztott négy darab decimális oktettből álló
[IPv4-cím](https://hu.wikipedia.org/wiki/IP-c%C3%ADm), illetve a gazdagép regisztrált
doménneve. A gazdagép részkomponens nem kis-, és nagybetű érzékeny.

```
gazdagép         = IP-literál / IPv4cím / doménnév

IP-literál       = "[" ( IPv6cím / IPvEljövendő  ) "]"

IPv4cím          = decimális-oktett "." decimális-oktett "." decimális-oktett "." decimális-oktett

decimális-oktett = 1*3DECIMÁLIS  ; 0-255

doménnév         = *( nem-fenntartott / url-kódolt / más-határolók )

IPvEljövendő     = "v" 1*HEXADECIMÁLIS "." 1*( nem-fenntartott / más-határolók / ":" )

IPv6cím          =                            6( h16 ":" ) ls32
                 /                       "::" 5( h16 ":" ) ls32
                 / [               h16 ] "::" 4( h16 ":" ) ls32
                 / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
                 / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
                 / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
                 / [ *4( h16 ":" ) h16 ] "::"              ls32
                 / [ *5( h16 ":" ) h16 ] "::"              h16
                 / [ *6( h16 ":" ) h16 ] "::"

h16              = 1*4HEXADECIMÁLIS
                  ; 16 bites cím, hexadecimális számmal jelölve
ls32             = ( h16 ":" h16 ) / IPv4cím
                  ; legalább 32 bites cím

```

#### 3.2.3. Port

The port subcomponent of authority is designated by an optional port
number in decimal following the host and delimited from it by a
single colon (":") character.

```
  port = *DECIMÁLIS
```

A scheme may define a default port. For example, the "http" scheme
defines a default port of "80", corresponding to its reserved TCP
port number.

### 3.3. Útvonal (path)

The path component contains data, usually organized in hierarchical
form, that, along with data in the non-hierarchical query component
(Section 3.4), serves to identify a resource within the scope of the
URI's scheme and naming authority (if any).  The path is terminated
by the first question mark ("?") or number sign ("#") character, or
by the end of the URI.

If a URI contains an authority component, then the path component
must either be empty or begin with a slash ("/") character.  If a URI
does not contain an authority component, then the path cannot begin
with two slash characters ("//").

A path consists of a sequence of path segments separated by a slash
("/") character.  A path is always defined for a URI, though the
defined path may be empty (zero length).

### 3.4. Lekérdezés (query)

The query component contains non-hierarchical data that, along with
data in the path component (Section 3.3), serves to identify a
resource within the scope of the URI's scheme and naming authority
(if any).  The query component is indicated by the first question
mark ("?") character and terminated by a number sign ("#") character
or by the end of the URI.

```
  lekérdezés = *( nyomtatható / "/" / "?" )
```

The characters slash ("/") and question mark ("?") may represent data
within the query component.


### 3.5. Részerőforrás (fragment)

The fragment identifier component of a URI allows indirect
identification of a secondary resource by reference to a primary
resource and additional identifying information.  The identified
secondary resource may be some portion or subset of the primary
resource, some view on representations of the primary resource, or
some other resource defined or described by those representations.  A
fragment identifier component is indicated by the presence of a
number sign ("#") character and terminated by the end of the URI.

```
  részerőforrás = *( nyomtatható / "/" / "?" )
```

[Kezdőlap](../README.md)
